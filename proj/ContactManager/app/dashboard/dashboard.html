
<section id="dashboard-view" class="mainbar" data-ng-controller="dashboard as vm">

    <pageheader info="vm.titles"></pageheader>

    <section class="matter">
        <div class="container">
            <!--Company Form-->
            <div class="row">
                <div class="col-md-8">
                    <div class="widget wblue">
                        <div data-cc-widget-header title="Company" allow-collapse="true"></div>
                        <div class="widget-content text-info">

                            <form id="companyForm" novalidate ng-submit="vm.save()">
                                <div class="row">
                                    <div class="col-md-12 col-lg-6">
                                        <div class="form-group">
                                            <label class="small col-md-4" for="company">Company</label>
                                            <div class="col-md-8">
                                                <input type="text" class="form-control" id="company" ng-model="vm.companyModel.CompanyName">
                                            </div>
                                        </div>
                                        <div class="spacer">&nbsp;</div>
                                        <div class="form-group">
                                            <label class="small col-md-4" for="address1">Address 1</label>
                                            <div class="col-md-8">
                                                <input type="text" class="form-control" id="address1" ng-model="vm.companyModel.Address1">
                                            </div>
                                        </div>
                                        <div class="spacer">&nbsp;</div>
                                        <div class="form-group">
                                            <label class="small col-md-4" for="address2">Address 2</label>
                                            <div class="col-md-8">
                                                <input type="text" class="form-control" id="address2" ng-model="vm.companyModel.Address2">
                                            </div>
                                        </div>
                                        <div class="spacer">&nbsp;</div>
                                        <div class="form-group">
                                            <label class="small col-md-4" for="stateCode">State</label>
                                            <div class="col-md-8">
                                                <select id="stateCode" name="selectState" class="form-control" data-ng-model="vm.companyModel.StateId" data-ng-options="s.Id as s.StateCode for s in vm.states" required>
                                                    <option value="">Select State</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="spacer">&nbsp;</div>
                                        <div class="form-group">
                                            <label class="small col-md-4" for="companyCategory">Category</label>
                                            <div class="col-md-8">
                                                <select id="companyCategory" name="selectCompanyCategory" class="form-control" data-ng-model="vm.companyModel.CategoryId" data-ng-options="a.Id as a.Category for a in vm.categories">
                                                    <option value="">-- Select --</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="spacer">&nbsp;</div>
                                    </div>

                                    <div class="col-md-12 col-lg-6">
                                        <div class="form-group">
                                            <label class="small col-md-4" for="phone">Phone</label>
                                            <div class="col-md-8">
                                                <input type="text" class="form-control" id="phone" ng-model="vm.companyModel.CompanyPhone" ui-mask="(999) 999-9999">
                                            </div>
                                        </div>
                                        <div class="spacer">&nbsp;</div>
                                        <div class="form-group">
                                            <label class="small col-md-4" for="fax">Fax</label>
                                            <div class="col-md-8">
                                                <input type="text" class="form-control" id="fax" ng-model="vm.companyModel.CompanyFax" ui-mask="(999) 999-9999">
                                            </div>
                                        </div>
                                        <div class="spacer">&nbsp;</div>
                                        <div class="form-group">
                                            <label class="small col-md-4" for="city">City</label>
                                            <div class="col-md-8">
                                                <input type="text" class="form-control" id="city" ng-model="vm.companyModel.City">
                                            </div>
                                        </div>
                                        <div class="spacer">&nbsp;</div>
                                        <div class="form-group">
                                            <label class="small col-md-4 " for="postalcode">Postal Code</label>
                                            <div class="col-md-8">
                                                <input type="text" class="form-control" id="postalcode" ng-model="vm.companyModel.PostalCode">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>&nbsp;</div>

                                <div class="row">
                                    <div class="col-xs-6"><button type="button" class="btn btn-danger form-control" ng-click="vm.open()">Delete</button></div>
                                    <div class="col-xs-6"><button type="submit" class="btn btn-success form-control">Save</button></div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!--Search-->
                <div class="col-md-4">
                    <div class="widget wblue">
                        <div data-cc-widget-header title="Search" allow-collapse="false"></div>
                        <div class="widget-content text-info">
                            <div class="row">
                                <div class="col-xs-12"><label class="small">Company</label>&nbsp; <input type="text" class="form-control" name="message" placeholder="Company name" ng-model="search.CompanyName"></div>
                                <div class="col-xs-12"><label class="small">Phone</label>&nbsp; <input type="text" class="form-control" name="message" placeholder="Company Phone number" valid-number maxlength="10" ng-model="search.CompanyPhone"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!--Company cards-->
            <div class="row">
                <div class="col-md-12">
                    <div class="widget wblue">
                        <div data-cc-widget-header title={{vm.titles.companyList}} allow-collapse="true"></div>
                        <div class="widget-content text-info">
                            <div class="row">
                                <div class="col-md-12">
                                    <div ng-repeat="c in vm.companies | filter:search">
                                        <company info="c" ng-click="vm.selectCompany(c.Id)"></company>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script type="text/ng-template" id="deleteConfirmation.html">
        <div class="modal-header">
            <h3>Confirmation</h3>
        </div>
        <form ng-submit="submit()">
            <div class="modal-body">
                <p>Are you sure you want to delete this company and all related contacts?</p>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-6">
                        <button class="btn btn-default form-control" ng-click="cancel()">Cancel</button>
                    </div>
                    <div class="col-md-6">
                        <input type="submit" class="btn btn-danger form-control" value="Yes I Want to Delete" />
                    </div>
                </div>
            </div>
        </form>
    </script>
</section>